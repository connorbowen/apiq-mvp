# Development Environment Setup Guide

This guide will help you set up all the necessary credentials and environment variables to run APIQ in development mode.

## üöÄ Quick Start

1. **Clone and install dependencies**
   ```bash
   git clone <your-repo>
   cd apiq-mvp
   npm install
   ```

2. **Set up database**
   ```bash
   # Install PostgreSQL (if not already installed)
   brew install postgresql@15
   brew services start postgresql@15
   
   # Create database
   createdb apiq_mvp
   
   # Run migrations
   npx prisma migrate deploy
   npx prisma generate
   ```

3. **Configure environment variables**
   ```bash
   cp env.example .env
   # Edit .env with your credentials (see sections below)
   ```

4. **Start development server**
   ```bash
   npm run dev
   ```

## üîë Required Credentials

### **1. Database (Already Configured)**
Your database is already set up with PostgreSQL. The connection string should be:
```bash
DATABASE_URL="postgresql://connorbowen@localhost:5432/apiq_mvp"
```

### **2. Email Service (Gmail - Already Configured)**
Your Gmail SMTP is already configured:
```bash
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=2connorbowen@gmail.com
SMTP_PASS=psne slba gsea lnhl
SMTP_FROM=2connorbowen@gmail.com
```

**Note**: For OAuth2 E2E testing, we use a dedicated test account (`apiq.testing@gmail.com`) to keep personal and testing environments separate.

### **3. Authentication Secrets (Auto-Generated)**
These have been automatically generated for development:
```bash
NEXTAUTH_SECRET=<auto-generated>
JWT_SECRET=<auto-generated>
ENCRYPTION_KEY=<auto-generated>
```

### **4. OpenAI API (Required for AI Chat)**
Get your API key from [OpenAI Platform](https://platform.openai.com/api-keys):
```bash
OPENAI_API_KEY=sk-your-openai-api-key
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=4000
OPENAI_TEMPERATURE=0.1
```

### **5. OAuth2 Providers (Optional - for Social Login)**

#### **Google OAuth2**
1. Go to [Google Cloud Console](https://console.cloud.google.com/)
2. Create a new project or select existing
3. Enable Google+ API
4. Go to Credentials ‚Üí Create Credentials ‚Üí OAuth 2.0 Client ID
5. Set authorized redirect URI: `http://localhost:3000/api/auth/callback/google`
6. Add to `.env`:
   ```bash
   GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
   GOOGLE_CLIENT_SECRET=your-google-client-secret
   ```

#### **GitHub OAuth2**
1. Go to [GitHub Developer Settings](https://github.com/settings/developers)
2. Click "New OAuth App"
3. Set Homepage URL: `http://localhost:3000`
4. Set Authorization callback URL: `http://localhost:3000/api/oauth/callback`
5. Add to `.env`:
   ```bash
   GITHUB_CLIENT_ID=your-github-client-id
   GITHUB_CLIENT_SECRET=your-github-client-secret
   ```

#### **Slack OAuth2**
1. Go to [Slack API Apps](https://api.slack.com/apps)
2. Create New App
3. Add OAuth & Permissions
4. Set redirect URL: `http://localhost:3000/api/oauth/callback`
5. Add to `.env`:
   ```bash
   SLACK_CLIENT_ID=your-slack-client-id
   SLACK_CLIENT_SECRET=your-slack-client-secret
   ```

## üß™ Testing Your Setup

### **Test Email Service**
1. Go to `http://localhost:3000/signup`
2. Create a new account
3. Check your email for verification link
4. Verify the account

### **Test AI Chat**
1. Go to `http://localhost:3000/dashboard`
2. Try the chat interface
3. Ask questions about your API connections

### **Test OAuth2 (if configured)**
1. Go to `http://localhost:3000/login`
2. Click on OAuth2 provider buttons (Google, GitHub, Slack)
3. Complete the authentication flow

### **Test Connections Management**
1. Go to `http://localhost:3000/dashboard`
2. Navigate to Connections tab
3. Test creating connections with different auth types
4. Test search and filter functionality
5. Test keyboard navigation and accessibility features

## üîß Troubleshooting

### **Email Issues**
- **"Missing credentials for PLAIN"**: Check your Gmail app password
- **"Authentication failed"**: Ensure 2FA is enabled and app password is correct
- **"Connection timeout"**: Check firewall settings

### **Database Issues**
- **"Connection refused"**: Ensure PostgreSQL is running
- **"Database does not exist"**: Run `createdb apiq_mvp`
- **"Prisma client not initialized"**: Run `npx prisma generate`

### **OAuth2 Issues**
- **"Invalid redirect URI"**: Check callback URLs in OAuth app settings
- **"Client ID not found"**: Verify client ID and secret in `.env`
- **"Scope not allowed"**: Check OAuth app permissions

### **OpenAI Issues**
- **"Invalid API key"**: Verify your OpenAI API key
- **"Rate limit exceeded"**: Check your OpenAI usage limits
- **"Model not found"**: Ensure you have access to the specified model

## üìù Environment Variables Reference

```bash
# Database
DATABASE_URL="postgresql://username@localhost:5432/apiq_mvp"

# Authentication
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=<auto-generated>
JWT_SECRET=<auto-generated>
JWT_EXPIRES_IN=24h
ENCRYPTION_KEY=<auto-generated>

# Email (Gmail)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
SMTP_FROM=your-email@gmail.com

# OpenAI
OPENAI_API_KEY=sk-your-api-key
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=4000
OPENAI_TEMPERATURE=0.1

# OAuth2 Providers (Optional)
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret
SLACK_CLIENT_ID=your-slack-client-id
SLACK_CLIENT_SECRET=your-slack-client-secret

# Server Configuration
NODE_ENV=development
PORT=3000
API_BASE_URL=http://localhost:3000

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
```

## üöÄ Next Steps

Once your development environment is set up:

1. **Test all features**: Signup, login, email verification, AI chat
2. **Add API connections**: Connect to external APIs
3. **Create workflows**: Build multi-step API workflows
4. **Deploy**: When ready, deploy to production

## üîí Security Notes

- **Never commit `.env` files** to version control
- **Use different credentials** for development and production
- **Rotate secrets regularly** in production
- **Use environment-specific** OAuth2 apps
- **Monitor API usage** to avoid rate limits 